[gd_scene load_steps=20 format=3 uid="uid://bmdyyhavahk6u"]

[ext_resource type="Script" path="res://scripts/Doors/Door.cs" id="1_xr1rh"]
[ext_resource type="AudioStream" uid="uid://5mhfm2gea0bf" path="res://sounds/closing_door.mp3" id="2_hojqd"]
[ext_resource type="AudioStream" uid="uid://c73hjfoayqh57" path="res://sounds/opening_door.mp3" id="4_3xxb8"]
[ext_resource type="Script" path="res://scripts/InteractibleObjects/InteractibleObject.cs" id="4_k5063"]
[ext_resource type="PackedScene" uid="uid://cbbt7d22hgbf8" path="res://mesh/doors/door_frame.tscn" id="5_dfrdw"]
[ext_resource type="PackedScene" uid="uid://4msucv36wig1" path="res://mesh/doors/door.glb" id="5_l7ukg"]

[sub_resource type="BoxShape3D" id="BoxShape3D_rj3ut"]
size = Vector3(4, 4, 2)

[sub_resource type="BoxShape3D" id="BoxShape3D_05bjd"]
size = Vector3(4, 4, 4.2)

[sub_resource type="BoxMesh" id="BoxMesh_pkt2q"]
size = Vector3(4, 4, 4.2)

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_siywp"]
transparency = 1
albedo_color = Color(1, 1, 1, 0.207843)

[sub_resource type="Animation" id="Animation_oi23d"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath(".:rotation")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector3(0, 0, 0)]
}

[sub_resource type="Animation" id="Animation_40sdw"]
resource_name = "close"
length = 1.1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath(".:rotation")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 1),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [Vector3(0, -1.5708, 0), Vector3(0, 0, 0)]
}
tracks/1/type = "audio"
tracks/1/imported = false
tracks/1/enabled = false
tracks/1/path = NodePath("../AudioStreamPlayer")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"clips": [{
"end_offset": 1.0,
"start_offset": 0.0,
"stream": ExtResource("2_hojqd")
}],
"times": PackedFloat32Array(0.366667)
}
tracks/1/use_blend = true

[sub_resource type="Animation" id="Animation_wufsp"]
resource_name = "close2"
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath(".:rotation")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 1),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [Vector3(0, 1.5708, 0), Vector3(0, 0, 0)]
}

[sub_resource type="Animation" id="Animation_g741r"]
resource_name = "open"
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath(".:rotation")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 1),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [Vector3(0, 0, 0), Vector3(0, -1.5708, 0)]
}
tracks/1/type = "audio"
tracks/1/imported = false
tracks/1/enabled = false
tracks/1/path = NodePath("../AudioStreamPlayer")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"clips": [{
"end_offset": 0.81,
"start_offset": 0.34,
"stream": ExtResource("4_3xxb8")
}],
"times": PackedFloat32Array(0.0333333)
}
tracks/1/use_blend = true

[sub_resource type="Animation" id="Animation_foki1"]
resource_name = "open2"
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath(".:rotation")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 1),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [Vector3(0, 0, 0), Vector3(0, 1.5708, 0)]
}

[sub_resource type="Animation" id="Animation_0phap"]
resource_name = "openButNotOpen1"
length = 0.3334
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath(".:rotation")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.2, 0.333333),
"transitions": PackedFloat32Array(1, 1, 1),
"update": 0,
"values": [Vector3(0, 0, 0), Vector3(0, 0.0698132, 0), Vector3(0, 0, 0)]
}

[sub_resource type="Animation" id="Animation_khixu"]
resource_name = "openButNotOpen2"
length = 0.3333
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath(".:rotation")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.2, 0.3333),
"transitions": PackedFloat32Array(1, 1, 1),
"update": 0,
"values": [Vector3(0, 0, 0), Vector3(0, -0.0698132, 0), Vector3(0, 0, 0)]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_vf5i2"]
_data = {
"RESET": SubResource("Animation_oi23d"),
"close1": SubResource("Animation_40sdw"),
"close2": SubResource("Animation_wufsp"),
"open1": SubResource("Animation_g741r"),
"open2": SubResource("Animation_foki1"),
"openButNotOpen1": SubResource("Animation_0phap"),
"openButNotOpen2": SubResource("Animation_khixu")
}

[sub_resource type="BoxShape3D" id="BoxShape3D_vsbe4"]
size = Vector3(1.55365, 3, 0)

[node name="door" type="Node3D" node_paths=PackedStringArray("animation", "doorAudio", "doorAxis")]
transform = Transform3D(1.01, 0, 0, 0, 1.01, 0, 0, 0, 1.01, 0, 0, 0)
script = ExtResource("1_xr1rh")
animation = NodePath("doorAxis/AnimationPlayer")
doorAudio = NodePath("AudioStreamPlayer")
doorAxis = NodePath("doorAxis")

[node name="Area1" type="Area3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 2, -1.1)

[node name="Area1CollisionShape" type="CollisionShape3D" parent="Area1"]
shape = SubResource("BoxShape3D_rj3ut")

[node name="Area2" type="Area3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 2, 1.1)

[node name="Area2CollisionShape" type="CollisionShape3D" parent="Area2"]
shape = SubResource("BoxShape3D_rj3ut")

[node name="ExitArea" type="Area3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 2, 0)

[node name="ExitAreaCollisionShape" type="CollisionShape3D" parent="ExitArea"]
shape = SubResource("BoxShape3D_05bjd")

[node name="MeshInstanceForDebugging" type="MeshInstance3D" parent="ExitArea"]
visible = false
mesh = SubResource("BoxMesh_pkt2q")
surface_material_override/0 = SubResource("StandardMaterial3D_siywp")

[node name="doorAxis" type="Node3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.75, 1.5, 0)

[node name="AnimationPlayer" type="AnimationPlayer" parent="doorAxis"]
reset_on_save = false
libraries = {
"": SubResource("AnimationLibrary_vf5i2")
}

[node name="doorBody" type="StaticBody3D" parent="doorAxis"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.75, -1.5, 0)
script = ExtResource("4_k5063")

[node name="DoorCollisionShape" type="CollisionShape3D" parent="doorAxis/doorBody"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.0177795, 1.5, 0)
shape = SubResource("BoxShape3D_vsbe4")

[node name="door" parent="doorAxis" instance=ExtResource("5_l7ukg")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.75, -1.5, 0)

[node name="AudioStreamPlayer" type="AudioStreamPlayer" parent="."]
pitch_scale = 1.4

[node name="door_frame" parent="." instance=ExtResource("5_dfrdw")]

[connection signal="body_entered" from="Area1" to="." method="OnEnterArea1"]
[connection signal="body_entered" from="Area2" to="." method="OnEnterArea2"]
[connection signal="body_exited" from="ExitArea" to="." method="OnBodyExited"]
[connection signal="OnClick" from="doorAxis/doorBody" to="." method="DoorClicked"]
